// Code generated by protoc-gen-echo. DO NOT EDIT.
// versions:
// - protoc-gen-echo v0.0.5
// - protoc  v3.12.4
// source: example/v1/greeter.proto

package v1

import (
	"fmt"
	"net/http"
	"os"
	"strconv"

	"github.com/golang-jwt/jwt"
	"github.com/labstack/echo/v4"
	"github.com/labstack/echo/v4/middleware"
)

var _ strconv.NumError

func RegisterGreeterRouter(e *echo.Echo) {
	jwtKey := "dangerous"
	if os.Getenv("JWTKEY") != "" {
		jwtKey = os.Getenv("JWTKEY")
	}
	config := middleware.JWTConfig{
		Claims:     &jwtCustomClaims{},
		SigningKey: []byte(jwtKey),
	}

	restricted := e.Group("/restricted")
	restricted.Use(middleware.JWTWithConfig(config))

	restricted1 := e.Group("/restricted1")
	restricted1.Use(middleware.JWTWithConfig(config))

	e.GET("/helloworld/:name/hi/:nice", _Greeter_SayHello0_HTTP_Handler)

	e.POST("/login", _Greeter_CreateUser0_HTTP_Handler)

	restricted.PATCH("/restricted/usr/:phone", _Greeter_UpdateUser0_HTTP_Handler)
	e.DELETE("/usr/:phone", _Greeter_DeleteUser0_HTTP_Handler)

	e.GET("/usr/:phone", _Greeter_ListUsers0_HTTP_Handler)

}

func _Greeter_SayHello0_HTTP_Handler(c echo.Context) error {
	var req *HelloRequest = new(HelloRequest)
	if v := c.QueryParam("name"); v != "" {
		if cv, err := strconv.ParseInt(v, 10, 32); err != nil {

			return http.ErrNotSupported

		} else {

			req.Name = int32(cv)

		}

	}
	if v := c.Param("name"); v != "" {
		if cv, err := strconv.ParseInt(v, 10, 32); err != nil {

			return http.ErrNotSupported

		} else {

			req.Name = int32(cv)

		}

	}
	if v := c.QueryParam("nice"); v != "" {
		req.Nice = v

	}
	if v := c.Param("nice"); v != "" {
		req.Nice = v

	}
	reply, err := GreeterSayHelloBusinessHandler(req)
	if err != nil {
		return err
	}
	return c.JSON(http.StatusOK, &reply)
}

func _Greeter_CreateUser0_HTTP_Handler(c echo.Context) error {
	var req *CreateUserRequest = new(CreateUserRequest)
	if err := c.Bind(req); err != nil {
		return err
	}
	if v := c.QueryParam("username"); v != "" {
		req.Username = v

	}
	if v := c.Param("username"); v != "" {
		req.Username = v

	}
	if v := c.QueryParam("password"); v != "" {
		req.Password = v

	}
	if v := c.Param("password"); v != "" {
		req.Password = v

	}
	reply, err := GreeterCreateUserBusinessHandler(req)
	if err != nil {
		return err
	}
	return c.JSON(http.StatusOK, &reply)
}

func _Greeter_UpdateUser0_HTTP_Handler(c echo.Context) error {
	var req *UpdateUserRequest = new(UpdateUserRequest)
	if err := c.Bind(req); err != nil {
		return err
	}
	if v := c.QueryParam("username"); v != "" {
		req.Username = v

	}
	if v := c.Param("username"); v != "" {
		req.Username = v

	}
	if v := c.QueryParam("phone"); v != "" {
		req.Phone = v

	}
	if v := c.Param("phone"); v != "" {
		req.Phone = v

	}
	if v := c.QueryParam("email"); v != "" {
		req.Email = v

	}
	if v := c.Param("email"); v != "" {
		req.Email = v

	}
	user := c.Get("user").(*jwt.Token)
	claims := user.Claims.(*jwtCustomClaims)
	username := claims.Name
	fmt.Printf("Got jwt name is: %v\n", username)
	req.Username = username

	reply, err := GreeterUpdateUserBusinessHandler(req)
	if err != nil {
		return err
	}
	return c.JSON(http.StatusOK, &reply)
}

func _Greeter_DeleteUser0_HTTP_Handler(c echo.Context) error {
	var req *UserRequest = new(UserRequest)
	if v := c.QueryParam("phone"); v != "" {
		req.Phone = v

	}
	if v := c.Param("phone"); v != "" {
		req.Phone = v

	}
	if v := c.QueryParam("email"); v != "" {
		req.Email = v

	}
	if v := c.Param("email"); v != "" {
		req.Email = v

	}
	reply, err := GreeterDeleteUserBusinessHandler(req)
	if err != nil {
		return err
	}
	return c.JSON(http.StatusOK, &reply)
}

func _Greeter_ListUsers0_HTTP_Handler(c echo.Context) error {
	var req *UserRequest = new(UserRequest)
	if v := c.QueryParam("phone"); v != "" {
		req.Phone = v

	}
	if v := c.Param("phone"); v != "" {
		req.Phone = v

	}
	if v := c.QueryParam("email"); v != "" {
		req.Email = v

	}
	if v := c.Param("email"); v != "" {
		req.Email = v

	}
	reply, err := GreeterListUsersBusinessHandler(req)
	if err != nil {
		return err
	}
	return c.JSON(http.StatusOK, &reply)
}
